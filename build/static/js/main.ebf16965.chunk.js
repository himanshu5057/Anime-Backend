(this.webpackJsonpanime=this.webpackJsonpanime||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n,c=a(0),s=a.n(c),r=a(11),i=a.n(r),o=(a(78),a(79),a(12)),l=a.n(o),u=a(18),j=a(9),d=a(13),b=a(23),f=a.n(b),h=a(2),O=s.a.createContext(),p="http://localhost:8080";var x=function(e){var t=e.children,a=Object(c.useState)(),s=Object(j.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)(!0),b=Object(j.a)(o,2),x=b[0],m=b[1],v=Object(d.f)();function g(){return(g=Object(u.a)(l.a.mark((function e(t,a,c){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(p,"/register"),{username:t,email:a,password:c});case 3:return s=e.sent,n=s.data.id,console.log(n),i(n),localStorage.setItem("currentUser",n),e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function w(){return(w=Object(u.a)(l.a.mark((function e(t,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(p,"/login"),{email:t,password:a});case 3:return c=e.sent,console.log(c),n=c.data.id,localStorage.setItem("currentUser",n),i(n),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function S(){return(S=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.push("login"),i(),localStorage.setItem("currentUser","");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=localStorage.getItem("currentUser");i(e),m(!1)}),[]);var N={currentUser:r,login:function(e,t){return w.apply(this,arguments)},register:function(e,t,a){return g.apply(this,arguments)},logout:function(){return S.apply(this,arguments)}};return Object(h.jsx)("div",{children:Object(h.jsx)(O.Provider,{value:N,children:!x&&t})})},m=a(134),v=a(139),g=a(140),w=(a(60),Object(m.a)((function(e){return{mar:{margin:"10px"},signup:{display:"flex",flexDirection:"row"}}})));var S=function(){var e=w(),t=Object(d.f)(),a=Object(c.useState)(!1),n=Object(j.a)(a,2),s=(n[0],n[1]),r=Object(c.useState)(),i=Object(j.a)(r,2),o=(i[0],i[1]),b=Object(c.useState)(),f=Object(j.a)(b,2),p=f[0],x=f[1],m=Object(c.useState)(),S=Object(j.a)(m,2),N=S[0],y=S[1],k=Object(c.useContext)(O),C=k.login,_=k.currentUser,D=function(){var e=Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,C(p,N);case 3:a=e.sent,s(!1),localStorage.setItem("username",a.data.username),console.log(a),a.data.result?t.push("/"):(o(a.data.message),setTimeout((function(){o("")}),3e3));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log(_),_&&t.push("/")}),[]),Object(h.jsx)("div",{className:"root",children:Object(h.jsxs)("div",{className:"register",children:[Object(h.jsx)("h2",{children:"Anime"}),Object(h.jsxs)("form",{className:"form1",children:[Object(h.jsx)(v.a,{id:"email",label:"Email",variant:"outlined",onChange:function(e){x(e.target.value)}}),Object(h.jsx)("div",{className:e.mar}),Object(h.jsx)(v.a,{id:"password",label:"Password",type:"password",variant:"outlined",onChange:function(e){y(e.target.value)}})]}),Object(h.jsx)("div",{className:e.mar}),Object(h.jsx)(g.a,{onSubmit:D,onClick:D,variant:"outlined",color:"secondary",children:"Login"}),Object(h.jsxs)("div",{className:e.signup,children:[Object(h.jsx)("h5",{children:"Don't have an account?"}),Object(h.jsx)("h5",{onClick:function(){t.push("/register")},style:{color:"blue",paddingLeft:"5px",cursor:"pointer"},children:"Sign Up"})]})]})})},N=Object(m.a)((function(e){return{mar:{margin:"10px"},signin:{display:"flex",flexDirection:"row"}}}));var y=function(){var e=N(),t=Object(d.f)(),a=Object(c.useState)(!1),n=Object(j.a)(a,2),s=(n[0],n[1]),r=Object(c.useState)(),i=Object(j.a)(r,2),o=(i[0],i[1]),b=Object(c.useState)(),f=Object(j.a)(b,2),p=f[0],x=f[1],m=Object(c.useState)(),w=Object(j.a)(m,2),S=w[0],y=w[1],k=Object(c.useState)(),C=Object(j.a)(k,2),_=C[0],D=C[1],E=Object(c.useContext)(O),I=E.register,R=E.currentUser,z=function(){var e=Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,I(p,S,_);case 3:a=e.sent,console.log(a.data),s(!1),a.data.result?(localStorage.setItem("username",a.data.username),t.push("/")):(o(a.data.message),setTimeout((function(){o("")}),3e3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){console.log(R),R&&t.push("/")}),[]),Object(h.jsx)("div",{className:"root",children:Object(h.jsxs)("div",{className:"register",children:[Object(h.jsx)("h2",{children:"Anime"}),Object(h.jsxs)("form",{className:"form1",onSubmit:z,children:[Object(h.jsx)(v.a,{id:"username",label:"Username",variant:"outlined",onChange:function(e){x(e.target.value)}}),Object(h.jsx)("div",{className:e.mar}),Object(h.jsx)(v.a,{id:"email",label:"Email",variant:"outlined",onChange:function(e){y(e.target.value)}}),Object(h.jsx)("div",{className:e.mar}),Object(h.jsx)(v.a,{id:"password",label:"Password",type:"password",variant:"outlined",onChange:function(e){D(e.target.value)}})]}),Object(h.jsx)("div",{className:e.mar}),Object(h.jsx)(g.a,{onSubmit:z,onClick:z,variant:"outlined",color:"secondary",children:"Register"}),Object(h.jsxs)("div",{className:e.signin,children:[Object(h.jsx)("h5",{children:"Don't have an account?"}),Object(h.jsx)("h5",{onClick:function(){t.push("/login")},style:{color:"blue",paddingLeft:"5px",cursor:"pointer"},children:"Sign In"})]})]})})},k=a(49),C=a(138),_=a(141);Object(m.a)((function(e){return{}}));var D=function(e){var t=Object(c.useState)(e.location.state),a=Object(j.a)(t,2),n=a[0];a[1],console.log(e);var s=Object(c.useState)([]),r=Object(j.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)(!1),b=Object(j.a)(d,2),O=b[0],p=b[1],x=Object(c.useState)(0),m=Object(j.a)(x,2),w=m[0],S=m[1],N=Object(c.useState)(""),y=Object(j.a)(N,2),k=y[0],C=y[1],D=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8080/anime/getReviews",e.next=3,f.a.post("".concat("http://localhost:8080/anime/getReviews"),{anime_id:n.id});case 3:null!=(t=e.sent)&&o(t.data.review),p(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8080/anime/addReview",console.log(n.id),t=localStorage.getItem("username"),console.log(t),a={username:t,rating:w,comment:k,anime_id:n.id.toString()},e.next=7,f.a.post("".concat("http://localhost:8080/anime/addReview"),a);case 7:c=e.sent,s=i,null==c.data&&200!=c.status||(s.push(a),o(s),console.log(i)),C(""),S(0),console.log(c);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){E()}),[i]),Object(h.jsxs)("div",{className:"animeNewPage",children:[Object(h.jsxs)("div",{className:"description",children:[Object(h.jsx)("h1",{children:e.location.state.titles.en}),Object(h.jsx)("img",{src:e.location.state.banner_image,height:"50%",width:"90%",style:{alignText:"center"}}),Object(h.jsx)("div",{children:e.location.state.descriptions.en}),Object(h.jsxs)("div",{children:["Genres:","  "," ",n.genres.join(", ")]}),Object(h.jsxs)("div",{children:["Trailer Link:"," ",n.trailer_url?Object(h.jsx)(_.a,{href:n.trailer_url,target:"_blank",children:"Link"}):"NA"]}),Object(h.jsxs)("div",{children:["Start Date: ",n.start_date.substring(0,10)," | "," End Date: ",n.end_date.substring(0,10)]}),Object(h.jsxs)("div",{children:["Season Year: ",n.season_year," "," | "," Episodes: ",n.episodes_count]})]}),Object(h.jsx)("div",{className:"reviews",children:0==O?Object(h.jsx)(g.a,{size:"large",variant:"contained",color:"primary",onClick:D,children:"Show Reviews"}):Object(h.jsxs)("div",{className:"all-add-review",children:[Object(h.jsxs)("div",{className:"addReview",children:[Object(h.jsx)(v.a,{id:"Review",label:"Review",variant:"outlined",value:k,fullWidth:!0,onChange:function(e){var t=e.target.value;t=t.trim(),C(t)}}),Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{class:"fa fa-star  ".concat(w>=1?"checked":""),onClick:function(){S(1)}}),Object(h.jsx)("span",{class:"fa fa-star  ".concat(w>=2?"checked":""),onClick:function(){S(2)}}),Object(h.jsx)("span",{class:"fa fa-star  ".concat(w>=3?"checked":""),onClick:function(){S(3)}}),Object(h.jsx)("span",{class:"fa fa-star  ".concat(w>=4?"checked":""),onClick:function(){S(4)}}),Object(h.jsx)("span",{class:"fa fa-star  ".concat(w>=5?"checked":""),onClick:function(){S(5)}})]}),Object(h.jsx)(g.a,{size:"large",variant:"contained",color:"primary",onClick:E,children:"Add"})]}),Object(h.jsx)("div",{className:"allReviews",children:Object(h.jsxs)("table",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Username"}),Object(h.jsx)("th",{children:"Comment"}),Object(h.jsx)("th",{children:"Rating"})]}),null==i||0==i.length?Object(h.jsx)("div",{children:"No reviews found"}):i.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.username}),Object(h.jsx)("td",{children:e.comment}),Object(h.jsx)("td",{children:e.rating})]})}))]})})]})})]})},E=Object(m.a)((function(e){return{margin:{margin:e.spacing(1)},logout:{position:"absolute",right:"20px",top:"10px"},row:{display:"flex",flexDirection:"row"},searchBar:{display:"flex",flexDirection:"row",width:"100vw",justifyContent:"center"},sizedBox:{width:"20px",height:"20px"},cover:{width:151}}}));var I=function(){var e=Object(d.f)(),t=E(),a=Object(c.useContext)(O),n=a.currentUser,s=(a.logout,Object(c.useState)("")),r=Object(j.a)(s,2),i=r[0],o=r[1],b=Object(c.useState)(""),p=Object(j.a)(b,2),x=p[0],m=p[1],w=Object(c.useState)(!1),S=Object(j.a)(w,2),N=(S[0],S[1],Object(c.useState)("")),y=Object(j.a)(N,2),D=(y[0],y[1]),I=Object(c.useState)(""),R=Object(j.a)(I,2),z=(R[0],R[1],Object(c.useState)([])),U=Object(j.a)(z,2),T=U[0],L=U[1];Object(c.useEffect)((function(){n||e.push("/login")}),[]),Object(c.useEffect)((function(){null!=localStorage.getItem("anime")&&L(JSON.parse(localStorage.getItem("anime")))}),[]);var P=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("https://api.aniapi.com/v1/anime",t="",""==i&&""==x||(""!=i&&""!=x?t+="?title=".concat(i,"&genres=").concat(x):""!=i?t+="?title=".concat(i):""!=x&&(t+="?genres=".concat(x))),0==i.length&&0==x.length){e.next=9;break}return e.next=6,f.a.get("".concat("https://api.aniapi.com/v1/anime").concat(t));case 6:a=e.sent,e.next=10;break;case 9:null==a?D("Please enter Title or Genre for better result"):404==a.data.status_code&&(a="No data found for your search, Please edit title or genre for better result");case 10:if(null==a||"string"==typeof a||200!=a.data.status_code){e.next=12;break}return e.delegateYield(l.a.mark((function e(){var t,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(D(""),t=[],n=[],c=function(e){n.push(f.a.post("http://localhost:8080/anime/getReviews",{anime_id:a.data.data.documents[e].id.toString()}).then((function(n){t.push(Object(k.a)(Object(k.a)({},a.data.data.documents[e]),{},{rating:n.data.rating}))})).catch((function(e){return console.log("Error occured")})))},s=0;s<a.data.data.documents.length;s++)c(s);return e.next=7,Promise.allSettled(n);case 7:L(t),console.log(0),console.log(t[0]),localStorage.setItem("anime",JSON.stringify(t));case 11:case"end":return e.stop()}}),e)}))(),"t0",12);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){var t=e.value,a=(e.text,e.color);return Object(h.jsxs)("div",{className:"rating",children:[Object(h.jsx)("span",{children:Object(h.jsx)("i",{style:{color:a},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{style:{color:a},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{style:{color:a},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{style:{color:a},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(h.jsx)("span",{children:Object(h.jsx)("i",{style:{color:a},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})})]})};return Object(h.jsxs)("div",{className:"main",children:[Object(h.jsx)("div",{className:"searchBar",children:Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)(v.a,{id:"Title",label:"Title",variant:"outlined",onChange:function(e){var t=e.target.value;t=(t=t.trim()).replace(" ","%20"),o(t)}}),Object(h.jsx)("div",{className:t.sizedBox}),Object(h.jsx)(v.a,{id:"Genre",label:"Genre",variant:"outlined",onChange:function(e){m(e.target.value.trim())}})," ",Object(h.jsx)("div",{className:t.sizedBox}),Object(h.jsx)("div",{className:t.sizedBox}),Object(h.jsx)(g.a,{className:t.margin,size:"large",variant:"contained",color:"primary",onClick:P,children:"Search"})]})}),Object(h.jsx)("div",{className:"animeData",children:T.map((function(t){return Object(h.jsx)("div",{className:"anime",children:Object(h.jsxs)(C.a,{className:"animeCard",onClick:function(){return e.push({pathname:"/animeDesc",state:t})},children:[Object(h.jsx)("img",{src:t.cover_image,alt:"",width:"91.97",height:"151",onClick:void 0}),Object(h.jsxs)("div",{className:"animeDes",children:[Object(h.jsxs)("div",{style:{fontWeight:"bold"},children:[t.titles.en,"  ",Object(h.jsxs)("div",{children:[" ",B({value:t.rating,text:" ",color:"orange"})]})]}),Object(h.jsxs)("div",{style:{fontSize:"10px"},children:[t.descriptions.en.substring(0,200)," "]}),Object(h.jsxs)("div",{style:{fontSize:"13px"},children:["Trailer Link:"," ",t.trailer_url?Object(h.jsx)(_.a,{href:t.trailer_url,target:"_blank",children:"Link"}):"NA"]}),Object(h.jsxs)("div",{style:{fontSize:"13px"},children:["Season Year: ",t.season_year," "," | "," Episodes:"," ",t.episodes_count]}),Object(h.jsxs)("div",{style:{fontSize:"13px"},children:["Genres ",t.genres.slice(0,5).join(", ")]})]})]})})}))})]})},R=a(26);var z=function(){return Object(h.jsx)(R.a,{children:Object(h.jsx)(x,{children:Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",component:I}),Object(h.jsx)(d.a,{path:"/login",component:S}),Object(h.jsx)(d.a,{path:"/register",component:y}),Object(h.jsx)(d.a,{path:"/animeDesc",component:D})]})})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,143)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(z,{})}),document.getElementById("root")),U()},60:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.ebf16965.chunk.js.map